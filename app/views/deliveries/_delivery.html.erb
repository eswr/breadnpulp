<tr>
	<td>
		<%= delivery.booking_no %>
		<br>
		<b style="color: <%= delivery.delivery_status.colorize %>"><%= delivery.delivery_status.name %></b>
		<br>
		<%= link_to "edit", edit_delivery_path(delivery), class: 'btn btn-warning btn-xs' %>
		<br>
		<%= delivery.delivery_date %>
		<br>
		<% color = 'black' %>
		<% if (delivery.at - 60.minutes).strftime("%H%M%S%N") < Time.now.strftime("%H%M%S%N") %>
			<% color = 'red' %>
		<% elsif (delivery.at - 45.minutes).strftime("%H%M%S%N") < Time.now.strftime("%H%M%S%N") %>
			<% color = 'yellow' %>
		<% elsif (delivery.at - 30.minutes).strftime("%H%M%S%N") < Time.now.strftime("%H%M%S%N") %>
			<% color = 'green' %>
		<% else %>
			<% color = 'blue' %>
		<% end %>
		<h5 style='color: <%= color %>'><%= (delivery.at - 30.minutes).strftime("%I:%M%p") %></h5>
		<br>
		<% if delivery.delivery_status.name == 'Confirmed' %>
			<%= link_to "mark as despatched", delivery_path(delivery, "delivery[delivery_status_id]" => DeliveryStatus.find_by(name: 'Despatched').id), method: :put, data: { :confirm => "Are you sure you have despatched #{delivery.user.name}'s order?" }, class: 'btn btn-danger btn-xs' %>
		<% end %>
	</td>
	<td>
		<%= delivery.payment_status.name %>
		<br>
		<%= delivery.payment_date || "Payment date not mentioned" %>
		<br>
		<%= delivery.payment_mode %>
		<br>
		Rs. <%= delivery.get_total_amount %>
		<br>
		<% if delivery.payment_status.name == 'Payment Due' %>
			<%= link_to "mark as payment completed", delivery_path(delivery, "delivery[payment_status_id]" => PaymentStatus.find_by(name: 'Payment Complete').id), method: :put, data: { :confirm => "Are you sure you have collected #{delivery.user.name}'s payment?" }, class: 'btn btn-danger btn-xs' %>
		<% end %>
	</td>
	<td>
		<%= delivery.user.name %>
		<br>
		<%= delivery.user.phone_number %>
		<br>
		<small><%= delivery.address.postal_address %></small>
	</td>
	<td>
		<% delivery.packs.each do |pack| %>
			<%= pack.menu.kickerr.name %> : <%= pack.quantity %><br>
		<% end %>
	</td>
</tr>