<% provide(:title, "All menus") %>

<h1>All Menus</h1>
<% if current_user.admin? %>
	<%= link_to "New menu", new_menu_path, class: "btn btn-xs", style: "background-color: #fed136; border-color: #ffffff; color: black;" %>
<% end %>

<table class="table table-hover">
	<tr>
		<th>
			Available on
		</th>
		<th>
			Kickerr name
		</th>
		<th>
			Price
		</th>
		<th>
			Kickerr description
		</th>
		<th>
			Main course(s)
		</th>
		<th>
			Beverage(s)
		</th>
		<th>
			Salad(s)
		</th>
		<th>
			Side(s)
		</th>
		<th>
			Action(s)
		</th>
	</tr>
	<% @menus.each do |menu| %>
		<tr>
			<td>
				<%= menu.available_on %>
			</td>
			<td>
				<%= menu.kickerr.name %>
			</td>
			<td>
				<%= menu.get_price %>
			</td>
			<td>
				<%= menu.kickerr.description %>
			</td>
			<td>
				<% food_items = menu.kickerr.food_items %>
				<% if food_items.present? %>
					<% food_items.where(course: 'Main').each do |food_item| %>
						<%= food_item.name %><br>
					<% end %>
				<% end %>
			</td>
			<td>
				<% if food_items.present? %>
					<% food_items.where(course: 'Beverage').each do |food_item| %>
						<%= food_item.name %><br>
					<% end %>
				<% end %>
			</td>
			<td>
				<% if food_items.present? %>
					<% food_items.where(course: 'Salad').each do |food_item| %>
						<%= food_item.name %><br>
					<% end %>
				<% end %>
			</td>
			<td>
				<% if food_items.present? %>
					<% food_items.where(course: 'Side').each do |food_item| %>
						<%= food_item.name %><br>
					<% end %>
				<% end %>
			</td>
			<td>
				<%= link_to "edit", edit_menu_path(menu) %>
			</td>
		</tr>
	<% end %>
</table>